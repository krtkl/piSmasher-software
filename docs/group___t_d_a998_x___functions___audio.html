<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>piSmasher Configuration Libraries: TDA998x Audio</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxystyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="krtkl-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">piSmasher Configuration Libraries
   </div>
   <div id="projectbrief">piSmasher peripheral device configuration libraries</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group___t_d_a998_x___functions___audio.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">TDA998x Audio<div class="ingroups"><a class="el" href="group___t_d_a998_x.html">TDA998x HDMI Transmitter</a> &raquo; <a class="el" href="group___t_d_a998_x___h_d_m_i___core.html">TDA998X_HDMI_Core</a> &raquo; <a class="el" href="group___t_d_a998_x___functions.html">TDA998x Device Control Functions</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga22f779decacbc3a28c2ae7c8f0ea62df"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_d_a998_x___functions___audio.html#ga22f779decacbc3a28c2ae7c8f0ea62df">tda998x_aud_set_port_enable</a> (struct <a class="el" href="structtda998x__dev.html">tda998x_dev</a> *dev, uint8_t en)</td></tr>
<tr class="memdesc:ga22f779decacbc3a28c2ae7c8f0ea62df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set Audio Port Enable.  <a href="#ga22f779decacbc3a28c2ae7c8f0ea62df">More...</a><br /></td></tr>
<tr class="separator:ga22f779decacbc3a28c2ae7c8f0ea62df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4f163637d808fac7afe8c2e59475655b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_d_a998_x___functions___audio.html#ga4f163637d808fac7afe8c2e59475655b">tda998x_aud_set_clk_enable</a> (struct <a class="el" href="structtda998x__dev.html">tda998x_dev</a> *dev, uint8_t en)</td></tr>
<tr class="memdesc:ga4f163637d808fac7afe8c2e59475655b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set Audio Clock Port Enable.  <a href="#ga4f163637d808fac7afe8c2e59475655b">More...</a><br /></td></tr>
<tr class="separator:ga4f163637d808fac7afe8c2e59475655b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae2ef08e99c2ca81c91c3a7643f1993fb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_d_a998_x___functions___audio.html#gae2ef08e99c2ca81c91c3a7643f1993fb">tda998x_aud_reset_cts</a> (struct <a class="el" href="structtda998x__dev.html">tda998x_dev</a> *dev)</td></tr>
<tr class="memdesc:gae2ef08e99c2ca81c91c3a7643f1993fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset Audio CTS.  <a href="#gae2ef08e99c2ca81c91c3a7643f1993fb">More...</a><br /></td></tr>
<tr class="separator:gae2ef08e99c2ca81c91c3a7643f1993fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa0b2935dc7209948217498856b971653"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_d_a998_x___functions___audio.html#gaa0b2935dc7209948217498856b971653">tda998x_aud_set_config</a> (struct <a class="el" href="structtda998x__dev.html">tda998x_dev</a> *dev, enum <a class="el" href="group___t_d_a998_x___audio.html#gaaa8fcf3ddbe3619646406ca59bbc7ae3">tda998x_aud_fmt</a> aud_fmt, enum <a class="el" href="group___t_d_a998_x___audio.html#gac865a1e02f20e86d6c59b4e383855f65">tda998x_aud_i2s_fmt</a> i2s_fmt, uint8_t i2s_chan, uint8_t dsd_chan, enum <a class="el" href="group___t_d_a998_x___audio.html#ga66585350adf4e379eeca658f95670afd">tda998x_clkpol_dsd</a> dsd_clkpol, enum <a class="el" href="group___t_d_a998_x___audio.html#ga0e25b8cfa7da2da7ae7f4f7c516e80fe">tda998x_swap_dsd</a> dsd_swap, uint8_t layout, uint16_t latency, enum <a class="el" href="group___t_d_a998_x___audio.html#gaee673a3d037bdbdfdb0fbd10ec0e3769">tda998x_dst_rate</a> dst_rate)</td></tr>
<tr class="memdesc:gaa0b2935dc7209948217498856b971653"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set Audio Input Configuration.  <a href="#gaa0b2935dc7209948217498856b971653">More...</a><br /></td></tr>
<tr class="separator:gaa0b2935dc7209948217498856b971653"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabc8f15481514e30fa1cea510e89ae1b9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_d_a998_x___functions___audio.html#gabc8f15481514e30fa1cea510e89ae1b9">tda998x_aud_set_cts</a> (struct <a class="el" href="structtda998x__dev.html">tda998x_dev</a> *dev, enum <a class="el" href="group___t_d_a998_x___audio.html#ga8a8c79fb5ee5f8b0d0046640f8b7a25f">tda998x_cts_ref</a> cts_ref, enum <a class="el" href="group___t_d_a998_x___audio.html#ga4583647aa23c59d15dd8270cb7a96eb4">tda998x_aud_rate</a> afs, enum <a class="el" href="group___t_d_a998_x.html#ga2473e43e8d9011dd526b160da99ecb66">tda998x_vid_fmt</a> vout_fmt, enum <a class="el" href="group___t_d_a998_x___h_d_m_i___core___registers.html#gaa560e03199cac459922972f053356e09">tda998x_vert_freq</a> vout_freq, uint32_t cts, uint16_t ctsX, enum <a class="el" href="group___t_d_a998_x___audio.html#ga62cfae6cc726327b6c55cfb08dfd09b5">tda998x_ctsk</a> ctsK, enum <a class="el" href="group___t_d_a998_x___audio.html#gaf00bdabd67c86a01f9c47bc03584f0a9">tda998x_ctsm</a> ctsM, enum <a class="el" href="group___t_d_a998_x___audio.html#gaee673a3d037bdbdfdb0fbd10ec0e3769">tda998x_dst_rate</a> dst_rate)</td></tr>
<tr class="memdesc:gabc8f15481514e30fa1cea510e89ae1b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set Audio CTS.  <a href="#gabc8f15481514e30fa1cea510e89ae1b9">More...</a><br /></td></tr>
<tr class="separator:gabc8f15481514e30fa1cea510e89ae1b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabde822a22781c5fdfff9d5246619e064"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_d_a998_x___functions___audio.html#gabde822a22781c5fdfff9d5246619e064">tda998x_aud_set_chan_status</a> (struct <a class="el" href="structtda998x__dev.html">tda998x_dev</a> *dev, uint8_t pcm_id, uint8_t fmt_info, uint8_t copyright, uint8_t categoryCode, enum <a class="el" href="group___t_d_a998_x___audio.html#ga4583647aa23c59d15dd8270cb7a96eb4">tda998x_aud_rate</a> samp_freq, uint8_t clk_acc, uint8_t maxword_len, uint8_t word_len, uint8_t origsamp_freq)</td></tr>
<tr class="memdesc:gabde822a22781c5fdfff9d5246619e064"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set Audio Output Channel Status.  <a href="#gabde822a22781c5fdfff9d5246619e064">More...</a><br /></td></tr>
<tr class="separator:gabde822a22781c5fdfff9d5246619e064"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga707e89d4fd73a89974fe70af92cf5d1c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_d_a998_x___functions___audio.html#ga707e89d4fd73a89974fe70af92cf5d1c">tda998x_aud_set_chan_status_mapping</a> (struct <a class="el" href="structtda998x__dev.html">tda998x_dev</a> *dev, uint8_t src_left[4], uint8_t chan_left[4], uint8_t src_right[4], uint8_t chan_right[4])</td></tr>
<tr class="memdesc:ga707e89d4fd73a89974fe70af92cf5d1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set Audio Channel Status Mapping.  <a href="#ga707e89d4fd73a89974fe70af92cf5d1c">More...</a><br /></td></tr>
<tr class="separator:ga707e89d4fd73a89974fe70af92cf5d1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga52e65d828f685a49c2113f236786ff1c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_d_a998_x___functions___audio.html#ga52e65d828f685a49c2113f236786ff1c">tda998x_aud_set_mute</a> (struct <a class="el" href="structtda998x__dev.html">tda998x_dev</a> *dev, bool mute)</td></tr>
<tr class="memdesc:ga52e65d828f685a49c2113f236786ff1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set Audio Mute.  <a href="#ga52e65d828f685a49c2113f236786ff1c">More...</a><br /></td></tr>
<tr class="separator:ga52e65d828f685a49c2113f236786ff1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3779a1bc1504e16c37ee0f7a258e2b2b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_d_a998_x___functions___audio.html#ga3779a1bc1504e16c37ee0f7a258e2b2b">tda998x_aud_set_input</a> (struct <a class="el" href="structtda998x__dev.html">tda998x_dev</a> *dev, struct <a class="el" href="structtda998x__audin__cfg.html">tda998x_audin_cfg</a> *audin_cfg)</td></tr>
<tr class="separator:ga3779a1bc1504e16c37ee0f7a258e2b2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="gae2ef08e99c2ca81c91c3a7643f1993fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae2ef08e99c2ca81c91c3a7643f1993fb">&#9670;&nbsp;</a></span>tda998x_aud_reset_cts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tda998x_aud_reset_cts </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtda998x__dev.html">tda998x_dev</a> *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="tda998x_8c.html">projects/lib/tda998x.c</a>&gt;</code></p>

<p>Reset Audio CTS. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>Finish register mask write sequence to reset CTS</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>TDA998x device structure pointer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero error status otherwise </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000006">Todo:</a></b></dt><dd>Define reset register table </dd></dl>
<div class="fragment"><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;{</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <span class="comment">/* Reset and release the CTS generator */</span></div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;<span class="comment">//  return write_reg_mask_table(dev, &amp;kResetCtsGenerator[0]);</span></div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="gabde822a22781c5fdfff9d5246619e064"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabde822a22781c5fdfff9d5246619e064">&#9670;&nbsp;</a></span>tda998x_aud_set_chan_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tda998x_aud_set_chan_status </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtda998x__dev.html">tda998x_dev</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pcm_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>fmt_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>copyright</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>categoryCode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group___t_d_a998_x___audio.html#ga4583647aa23c59d15dd8270cb7a96eb4">tda998x_aud_rate</a>&#160;</td>
          <td class="paramname"><em>samp_freq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>clk_acc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>maxword_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>word_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>origsamp_freq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="tda998x_8c.html">projects/lib/tda998x.c</a>&gt;</code></p>

<p>Set Audio Output Channel Status. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>TDA998x device structure pointer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero error status otherwise </dd></dl>
<div class="fragment"><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;{</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;    <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;    uint8_t buf[4];</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;    <span class="keyword">const</span> uint8_t freq[] = {</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;        3,      <span class="comment">/* 32k */</span></div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;        0,      <span class="comment">/* 44.1k */</span></div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;        2,      <span class="comment">/* 48k */</span></div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;        8,      <span class="comment">/* 88.2k */</span></div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;        10,     <span class="comment">/* 96k */</span></div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;        12,     <span class="comment">/* 176.4k */</span></div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;        14,     <span class="comment">/* 192k */</span></div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;        9,      <span class="comment">/* 768k */</span></div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;        1,      <span class="comment">/* Not indicated */</span></div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;    };</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;    <span class="comment">/* Return if sink is not an HDMI device */</span></div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;    <span class="keywordflow">if</span> (dev-&gt;sink != <a class="code" href="group___t_d_a998_x.html#ggad08fa447c674bbe3aeb29cbdaca69acaa789dd80264a30ba9c638b03dd776e7ef">SINK_HDMI</a>)</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;        <span class="keywordflow">return</span> ERR_NOT_PERMITTED;</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;    buf[0] = ((uint8_t) fmt_info &lt;&lt; 3) |</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;            ((uint8_t) copyright &lt;&lt; 2) |</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;            ((uint8_t) pcm_id &lt;&lt; 1);</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    buf[1] = categoryCode;</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    buf[2] = ((uint8_t) clk_acc &lt;&lt; 4) | freq[samp_freq];</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    buf[3] = ((uint8_t) origsamp_freq &lt;&lt; 4) |</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;            ((uint8_t) word_len &lt;&lt; 1) |</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;            (uint8_t) maxword_len;</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    <span class="comment">/* Write 4 Channel Status bytes */</span></div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#gab8ef57443b7f888b186f8204f0b38f48">tda998x_write</a>(dev, CH_STAT_B_0, 4, &amp;buf[0]);</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;}</div><div class="ttc" id="group___t_d_a998_x___functions___i2_c_html_gab8ef57443b7f888b186f8204f0b38f48"><div class="ttname"><a href="group___t_d_a998_x___functions___i2_c.html#gab8ef57443b7f888b186f8204f0b38f48">tda998x_write</a></div><div class="ttdeci">static int tda998x_write(struct tda998x_dev *dev, enum tda998x_hdmi_reg reg, uint8_t len, uint8_t *data)</div><div class="ttdoc">Write Data. </div><div class="ttdef"><b>Definition:</b> tda998x.c:1247</div></div>
<div class="ttc" id="group___t_d_a998_x_html_ggad08fa447c674bbe3aeb29cbdaca69acaa789dd80264a30ba9c638b03dd776e7ef"><div class="ttname"><a href="group___t_d_a998_x.html#ggad08fa447c674bbe3aeb29cbdaca69acaa789dd80264a30ba9c638b03dd776e7ef">SINK_HDMI</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:65</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga707e89d4fd73a89974fe70af92cf5d1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga707e89d4fd73a89974fe70af92cf5d1c">&#9670;&nbsp;</a></span>tda998x_aud_set_chan_status_mapping()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tda998x_aud_set_chan_status_mapping </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtda998x__dev.html">tda998x_dev</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>src_left</em>[4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>chan_left</em>[4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>src_right</em>[4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>chan_right</em>[4]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="tda998x_8c.html">projects/lib/tda998x.c</a>&gt;</code></p>

<p>Set Audio Channel Status Mapping. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>TDA998x device structure pointer </td></tr>
    <tr><td class="paramname">src_left</td><td>Left channel source </td></tr>
    <tr><td class="paramname">chan_left</td><td>Left channel output </td></tr>
    <tr><td class="paramname">src_right</td><td>Right channel source </td></tr>
    <tr><td class="paramname">chan_right</td><td>Right channel output </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero error status otherwise </dd></dl>
<div class="fragment"><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;{</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    uint8_t buf[2];</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    <span class="keywordflow">if</span> (dev-&gt;sink != <a class="code" href="group___t_d_a998_x.html#ggad08fa447c674bbe3aeb29cbdaca69acaa789dd80264a30ba9c638b03dd776e7ef">SINK_HDMI</a>)</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;        <span class="keywordflow">return</span> ERR_NOT_PERMITTED;</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160; </div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;    buf[0] = (chan_left[0] &lt;&lt; 4) | (src_left[0] &amp; 0xFF);</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;    buf[1] = (chan_right[0] &lt;&lt; 4) | (src_right[0] &amp; 0xFF);</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#gab8ef57443b7f888b186f8204f0b38f48">tda998x_write</a>(dev, CH_STAT_B_2_AP0_L, 2, &amp;buf[0]);</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;  </div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;}</div><div class="ttc" id="group___t_d_a998_x___functions___i2_c_html_gab8ef57443b7f888b186f8204f0b38f48"><div class="ttname"><a href="group___t_d_a998_x___functions___i2_c.html#gab8ef57443b7f888b186f8204f0b38f48">tda998x_write</a></div><div class="ttdeci">static int tda998x_write(struct tda998x_dev *dev, enum tda998x_hdmi_reg reg, uint8_t len, uint8_t *data)</div><div class="ttdoc">Write Data. </div><div class="ttdef"><b>Definition:</b> tda998x.c:1247</div></div>
<div class="ttc" id="group___t_d_a998_x_html_ggad08fa447c674bbe3aeb29cbdaca69acaa789dd80264a30ba9c638b03dd776e7ef"><div class="ttname"><a href="group___t_d_a998_x.html#ggad08fa447c674bbe3aeb29cbdaca69acaa789dd80264a30ba9c638b03dd776e7ef">SINK_HDMI</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:65</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga4f163637d808fac7afe8c2e59475655b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4f163637d808fac7afe8c2e59475655b">&#9670;&nbsp;</a></span>tda998x_aud_set_clk_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tda998x_aud_set_clk_enable </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtda998x__dev.html">tda998x_dev</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>en</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="tda998x_8c.html">projects/lib/tda998x.c</a>&gt;</code></p>

<p>Set Audio Clock Port Enable. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>TDA998x device structure pointer </td></tr>
    <tr><td class="paramname">en</td><td>Clock port enable register value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero error status otherwise </dd></dl>
<div class="fragment"><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;{</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <span class="comment">/* Check parameter */</span></div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    <span class="keywordflow">if</span> (dev == NULL)</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;        <span class="keywordflow">return</span> ERR_NULL_PARAM;</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a>(dev, ENA_ACLK, en);</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;}</div><div class="ttc" id="group___t_d_a998_x___functions___i2_c_html_ga5ff7c50b095acc187cdf4078ebb8d884"><div class="ttname"><a href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a></div><div class="ttdeci">static int write_reg(struct tda998x_dev *dev, enum tda998x_hdmi_reg reg, uint8_t data)</div><div class="ttdoc">Write Register. </div><div class="ttdef"><b>Definition:</b> tda998x.c:1283</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaa0b2935dc7209948217498856b971653"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa0b2935dc7209948217498856b971653">&#9670;&nbsp;</a></span>tda998x_aud_set_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tda998x_aud_set_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtda998x__dev.html">tda998x_dev</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group___t_d_a998_x___audio.html#gaaa8fcf3ddbe3619646406ca59bbc7ae3">tda998x_aud_fmt</a>&#160;</td>
          <td class="paramname"><em>aud_fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group___t_d_a998_x___audio.html#gac865a1e02f20e86d6c59b4e383855f65">tda998x_aud_i2s_fmt</a>&#160;</td>
          <td class="paramname"><em>i2s_fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>i2s_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>dsd_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group___t_d_a998_x___audio.html#ga66585350adf4e379eeca658f95670afd">tda998x_clkpol_dsd</a>&#160;</td>
          <td class="paramname"><em>dsd_clkpol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group___t_d_a998_x___audio.html#ga0e25b8cfa7da2da7ae7f4f7c516e80fe">tda998x_swap_dsd</a>&#160;</td>
          <td class="paramname"><em>dsd_swap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>layout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>latency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group___t_d_a998_x___audio.html#gaee673a3d037bdbdfdb0fbd10ec0e3769">tda998x_dst_rate</a>&#160;</td>
          <td class="paramname"><em>dst_rate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="tda998x_8c.html">projects/lib/tda998x.c</a>&gt;</code></p>

<p>Set Audio Input Configuration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>TDA998x device structure pointer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero error status otherwise </dd></dl>
<div class="fragment"><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;{</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    uint8_t reg_val;</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    <span class="keywordflow">switch</span> (aud_fmt) {</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group___t_d_a998_x___audio.html#ggaaa8fcf3ddbe3619646406ca59bbc7ae3aa5c8c3fbc709757e728143022ea0d4fe">AFMT_SPDIF</a>:</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;        reg_val = (uint8_t) REG_VAL_SEL_AIP_SPDIF;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;        <span class="comment">/* configure MUX_AP */</span></div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;        ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a>(dev, MUX_AP, MUX_AP_SELECT_SPDIF);</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group___t_d_a998_x___audio.html#ggaaa8fcf3ddbe3619646406ca59bbc7ae3ad2a3dd7ba0be80a4503d1e75db587766">AFMT_I2S</a>:</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;        reg_val = (uint8_t) REG_VAL_SEL_AIP_I2S;</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;    </div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;        <span class="comment">/* configure MUX_AP */</span></div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;        ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a>(dev, MUX_AP, MUX_AP_SELECT_I2S);</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    </div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160; </div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group___t_d_a998_x___audio.html#ggaaa8fcf3ddbe3619646406ca59bbc7ae3acda9844ca947c4c50e8f4f7dc7267267">AFMT_OBA</a>:</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;        reg_val = (uint8_t) REG_VAL_SEL_AIP_OBA;</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160; </div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group___t_d_a998_x___audio.html#ggaaa8fcf3ddbe3619646406ca59bbc7ae3adbf4a97001ff2311f64e1ef7d9d974e2">AFMT_HBR</a>:</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;        reg_val = (uint8_t) REG_VAL_SEL_AIP_HBR;</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160; </div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;        <span class="keywordflow">return</span> ERR_BAD_PARAM;</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    }</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    <span class="comment">/* Set the audio input processor format to aud_fmt. AIP_CLKSEL_sel_aip */</span></div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev, AIP_CLKSEL, 0x38U, reg_val &lt;&lt; 3);</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;  </div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    <span class="comment">/* Channel status on 1 channel  */</span></div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev, CA_I2S, CA_I2S_HBR_CHSTAT_4, 0);</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;  </div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;    <span class="comment">/* Select the audio format */</span></div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;    <span class="keywordflow">if</span> (aud_fmt == <a class="code" href="group___t_d_a998_x___audio.html#ggaaa8fcf3ddbe3619646406ca59bbc7ae3ad2a3dd7ba0be80a4503d1e75db587766">AFMT_I2S</a>) {</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;        <span class="keywordflow">if</span> (i2s_chan != 32) {</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;            ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev,</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;                    CA_I2S,</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;                    CA_I2S_CA_I2S_MASK,</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;                    (uint8_t) i2s_chan);</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;        }</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    </div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;        <span class="comment">/* Select the I2S format */</span></div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;        ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev,</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;                I2S_FORMAT,</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;                I2S_FORMAT_I2S_FORMAT_MASK,</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;                (uint8_t) i2s_fmt);</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;  </div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (aud_fmt == <a class="code" href="group___t_d_a998_x___audio.html#ggaaa8fcf3ddbe3619646406ca59bbc7ae3acda9844ca947c4c50e8f4f7dc7267267">AFMT_OBA</a>) {</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;        ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a>(dev, CA_DSD, dsd_chan);</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160; </div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev,</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;                AIP_CLKSEL,</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;                AIP_CLKSEL_SEL_POL_CLK,</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;                (uint8_t) dsd_clkpol);</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;            <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;                <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev,</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;                AIP_CNTRL_0,</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;                AIP_CNTRL_0_SWAP,</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;                (uint8_t) dsd_swap);</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;    }</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160; </div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    <span class="comment">/* Set layout and latency */</span></div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev,</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;            AIP_CNTRL_0,</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;            AIP_CNTRL_0_LAYOUT,</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;            layout &lt;&lt; 2);</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a>(dev, LATENCY_RD, (uint8_t) latency);</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;}</div><div class="ttc" id="group___t_d_a998_x___functions___i2_c_html_ga5ff7c50b095acc187cdf4078ebb8d884"><div class="ttname"><a href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a></div><div class="ttdeci">static int write_reg(struct tda998x_dev *dev, enum tda998x_hdmi_reg reg, uint8_t data)</div><div class="ttdoc">Write Register. </div><div class="ttdef"><b>Definition:</b> tda998x.c:1283</div></div>
<div class="ttc" id="group___t_d_a998_x___audio_html_ggaaa8fcf3ddbe3619646406ca59bbc7ae3acda9844ca947c4c50e8f4f7dc7267267"><div class="ttname"><a href="group___t_d_a998_x___audio.html#ggaaa8fcf3ddbe3619646406ca59bbc7ae3acda9844ca947c4c50e8f4f7dc7267267">AFMT_OBA</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:339</div></div>
<div class="ttc" id="group___t_d_a998_x___audio_html_ggaaa8fcf3ddbe3619646406ca59bbc7ae3ad2a3dd7ba0be80a4503d1e75db587766"><div class="ttname"><a href="group___t_d_a998_x___audio.html#ggaaa8fcf3ddbe3619646406ca59bbc7ae3ad2a3dd7ba0be80a4503d1e75db587766">AFMT_I2S</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:338</div></div>
<div class="ttc" id="group___t_d_a998_x___functions___i2_c_html_ga0e3c7717dc1e066aadf0cdd6802690d4"><div class="ttname"><a href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a></div><div class="ttdeci">static int write_reg_mask(struct tda998x_dev *dev, enum tda998x_hdmi_reg reg, uint8_t mask, uint8_t val)</div><div class="ttdoc">Register Mask Write Write a value with mask bits to a register. </div><div class="ttdef"><b>Definition:</b> tda998x.c:1371</div></div>
<div class="ttc" id="group___t_d_a998_x___audio_html_ggaaa8fcf3ddbe3619646406ca59bbc7ae3adbf4a97001ff2311f64e1ef7d9d974e2"><div class="ttname"><a href="group___t_d_a998_x___audio.html#ggaaa8fcf3ddbe3619646406ca59bbc7ae3adbf4a97001ff2311f64e1ef7d9d974e2">AFMT_HBR</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:341</div></div>
<div class="ttc" id="group___t_d_a998_x___audio_html_ggaaa8fcf3ddbe3619646406ca59bbc7ae3aa5c8c3fbc709757e728143022ea0d4fe"><div class="ttname"><a href="group___t_d_a998_x___audio.html#ggaaa8fcf3ddbe3619646406ca59bbc7ae3aa5c8c3fbc709757e728143022ea0d4fe">AFMT_SPDIF</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:337</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gabc8f15481514e30fa1cea510e89ae1b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabc8f15481514e30fa1cea510e89ae1b9">&#9670;&nbsp;</a></span>tda998x_aud_set_cts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tda998x_aud_set_cts </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtda998x__dev.html">tda998x_dev</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group___t_d_a998_x___audio.html#ga8a8c79fb5ee5f8b0d0046640f8b7a25f">tda998x_cts_ref</a>&#160;</td>
          <td class="paramname"><em>cts_ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group___t_d_a998_x___audio.html#ga4583647aa23c59d15dd8270cb7a96eb4">tda998x_aud_rate</a>&#160;</td>
          <td class="paramname"><em>afs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group___t_d_a998_x.html#ga2473e43e8d9011dd526b160da99ecb66">tda998x_vid_fmt</a>&#160;</td>
          <td class="paramname"><em>vout_fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group___t_d_a998_x___h_d_m_i___core___registers.html#gaa560e03199cac459922972f053356e09">tda998x_vert_freq</a>&#160;</td>
          <td class="paramname"><em>vout_freq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>cts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>ctsX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group___t_d_a998_x___audio.html#ga62cfae6cc726327b6c55cfb08dfd09b5">tda998x_ctsk</a>&#160;</td>
          <td class="paramname"><em>ctsK</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group___t_d_a998_x___audio.html#gaf00bdabd67c86a01f9c47bc03584f0a9">tda998x_ctsm</a>&#160;</td>
          <td class="paramname"><em>ctsM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group___t_d_a998_x___audio.html#gaee673a3d037bdbdfdb0fbd10ec0e3769">tda998x_dst_rate</a>&#160;</td>
          <td class="paramname"><em>dst_rate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="tda998x_8c.html">projects/lib/tda998x.c</a>&gt;</code></p>

<p>Set Audio CTS. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>TDA998x device structure pointer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero error status otherwise </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000007">Todo:</a></b></dt><dd>Define CTS values </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000008">Todo:</a></b></dt><dd>Reset and release the CTS generator </dd></dl>
<div class="fragment"><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;{</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    uint8_t reg_val;</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;    uint8_t pixClk;         <span class="comment">/* Pixel clock index */</span></div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;    uint32_t acrN;          <span class="comment">/* Audio clock recovery N */</span></div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160; </div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;    <span class="comment">/* Return if sink is not an HDMI device */</span></div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    <span class="keywordflow">if</span> (dev-&gt;sink != <a class="code" href="group___t_d_a998_x.html#ggad08fa447c674bbe3aeb29cbdaca69acaa789dd80264a30ba9c638b03dd776e7ef">SINK_HDMI</a>)</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;        <span class="keywordflow">return</span> ERR_NOT_PERMITTED;</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160; </div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    <span class="keywordflow">if</span> ((vout_fmt &gt;= <a class="code" href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66aa0381c9789a258d4ea53605874028234">VFMT_01_640x480p_60Hz</a>) &amp;&amp;</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;            (vout_fmt &lt;= <a class="code" href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66afb842a2ba3d8fd7e9208d58d2d8e51a2">VFMT_62_1280x720p_30Hz</a>)) {</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;        <span class="keywordflow">if</span> (vout_freq == <a class="code" href="group___t_d_a998_x___h_d_m_i___core___registers.html#ggaa560e03199cac459922972f053356e09a977673dc75efc9cf0147e11306375985">VFREQ_50Hz</a>) {</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;            <span class="keywordflow">if</span> ((vout_fmt &lt; <a class="code" href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66af1419762802acdd3a85c2f969158922b">VFMT_17_720x576p_50Hz</a>) ||</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;                    (vout_fmt &gt; <a class="code" href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66af8c472bf89cc0b7435c4d5c58c86b8fe">VFMT_31_1920x1080p_50Hz</a>))</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                <span class="keywordflow">return</span> ERR_ILLEGAL_PARAMS;</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    </div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (vout_freq == <a class="code" href="group___t_d_a998_x___h_d_m_i___core___registers.html#ggaa560e03199cac459922972f053356e09acdeee1db9118b513656e10425a0c8736">VFREQ_24Hz</a>) {</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;            <span class="keywordflow">if</span> ((vout_fmt != <a class="code" href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66ad89773028ec4dd84662ad8522571ad7a">VFMT_32_1920x1080p_24Hz</a>) &amp;&amp;</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;                    (vout_fmt != <a class="code" href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66a8bd2c8154766a6f635a08aa0b921aeda">VFMT_60_1280x720p_24Hz</a>))</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;                <span class="keywordflow">return</span> ERR_ILLEGAL_PARAMS;</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (vout_freq == <a class="code" href="group___t_d_a998_x___h_d_m_i___core___registers.html#ggaa560e03199cac459922972f053356e09a5cf2537b41e157dc5359f48d3779e68e">VFREQ_25Hz</a>) {</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;            <span class="keywordflow">if</span> ((vout_fmt != <a class="code" href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66a8ebfb58544baceed7bed10d683f0cd0e">VFMT_33_1920x1080p_25Hz</a>) &amp;&amp;</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;                    (vout_fmt != <a class="code" href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66a42fba4f03d67aafa7178b5a78b5bfa12">VFMT_20_1920x1080i_50Hz</a>) &amp;&amp;</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;                    (vout_fmt != <a class="code" href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66a4d52c31a7aa7272d9df8655bb0aec2b9">VFMT_61_1280x720p_25Hz</a>))</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;                <span class="keywordflow">return</span> ERR_ILLEGAL_PARAMS;</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (vout_freq == <a class="code" href="group___t_d_a998_x___h_d_m_i___core___registers.html#ggaa560e03199cac459922972f053356e09a41847fb2fc5a3c9430e25e8a225eb062">VFREQ_30Hz</a>) {</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;            <span class="keywordflow">if</span> ((vout_fmt != <a class="code" href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66abe3dec727201bbf555dde9fe3430f1bc">VFMT_34_1920x1080p_30Hz</a>) &amp;&amp;</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;                    (vout_fmt != <a class="code" href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66a11c0973417f5b5e66b053c8705f14d28">VFMT_05_1920x1080i_60Hz</a>) &amp;&amp;</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;                    (vout_fmt != <a class="code" href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66afb842a2ba3d8fd7e9208d58d2d8e51a2">VFMT_62_1280x720p_30Hz</a>))</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;                <span class="keywordflow">return</span> ERR_ILLEGAL_PARAMS;</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;            <span class="keywordflow">if</span> (vout_fmt &gt;= <a class="code" href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66af1419762802acdd3a85c2f969158922b">VFMT_17_720x576p_50Hz</a>)</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;                <span class="keywordflow">return</span> ERR_ILLEGAL_PARAMS;</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;        }</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    }</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  </div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;    <span class="comment">/* Check for auto or manual CTS */</span></div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    <span class="keywordflow">if</span> (cts == 0) {</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;        <span class="comment">/* Auto */</span></div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;        ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev, AIP_CNTRL_0, AIP_CNTRL_0_ACR_MAN, 0);</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;        <span class="comment">/* Manual */</span></div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;        ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev,</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;                AIP_CNTRL_0,</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;                AIP_CNTRL_0_ACR_MAN,</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;                AIP_CNTRL_0_ACR_MAN);</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    }</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160; </div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;    <span class="comment">/* Derive M and K from X? */</span></div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;    <span class="keywordflow">if</span> ((ctsM == <a class="code" href="group___t_d_a998_x___audio.html#ggaf00bdabd67c86a01f9c47bc03584f0a9a01be2de745e63a00d0d33b54ae9e72f4">CTSMTS_USE_CTSX</a>) ||</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;            (ctsK == <a class="code" href="group___t_d_a998_x___audio.html#gga62cfae6cc726327b6c55cfb08dfd09b5a887a43cd05838ce3f06b75cf2f182936">CTSK_USE_CTSX</a>)) {</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;<span class="comment">//      ctsM = (enum tda998x_ctsm) kCtsXToMK[ctsX][0];</span></div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;<span class="comment">//      ctsK = (enum tda998x_ctsk) kCtsXToMK[ctsX][1];</span></div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    }</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160; </div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <span class="comment">/* Set the Post-divider measured timestamp factor */</span></div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    reg_val = (uint8_t) ctsM;</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev,</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;            CTS_N_RW,</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;            CTS_N_M_SEL_MASK,</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;            reg_val &lt;&lt; 4);</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160; </div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    <span class="comment">/* Set the predivider scale */</span></div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a> (dev,</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;            CTS_N_RW,</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;            CTS_N_K_SEL_MASK,</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;            (uint8_t) ctsK);</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;<span class="comment">     * Use vout_fmt and vout_freq to index into a lookup table to get</span></div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;<span class="comment">     * the current pixel clock value.</span></div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    set_pix_clk(vout_fmt, vout_freq, &amp;pixClk);</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;<span class="comment">     * Set the Audio Clock Recovery N multiplier based on the audio sample</span></div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;<span class="comment">     * frequency afs and current pixel clock.</span></div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;<span class="comment">//  acrN = kPixClkToAcrN[pixClk][afs];</span></div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;<span class="comment">//   /* HDMITX_AFS_32k  _AFS_48K       _AFS_96K        _AFS_192K */</span></div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;<span class="comment">//   /*         _AFS_44_1k      _AFS_88_2K      _AFS_176_4K       */</span></div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;<span class="comment">//     { 4576,   7007,   6864,  14014,  13728,  28028,  27456}, /* E_PIXCLK_25175 */</span></div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;<span class="comment">//     { 4096,   6272,   6144,  12544,  12288,  25088,  24576}, /* E_PIXCLK_25200 */</span></div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;<span class="comment">//     { 4096,   6272,   6144,  12544,  12288,  25088,  24576}, /* E_PIXCLK_27000 */</span></div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;<span class="comment">//     { 4096,   6272,   6144,  12544,  12288,  25088,  24576}, /* E_PIXCLK_27027 */</span></div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;<span class="comment">//     { 4096,   6272,   6144,  12544,  12288,  25088,  24576}, /* E_PIXCLK_54000 */</span></div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;<span class="comment">//     { 4096,   6272,   6144,  12544,  12288,  25088,  24576}, /* E_PIXCLK_54054 */</span></div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;<span class="comment">//     { 4096,   6272,   6144,  12544,  12288,  25088,  24576}, /* E_PIXCLK_59400 */</span></div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;<span class="comment">//     {11648,  17836,  11648,  35672,  23296,  71344,  46592}, /* E_PIXCLK_74175 */</span></div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;<span class="comment">//     { 4096,   6272,   6144,  12544,  12288,  25088,  24576}, /* E_PIXCLK_74250 */</span></div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;<span class="comment">//     {11648,   8918,   5824,  17836,  11648,  35672,  23296}, /* E_PIXCLK_148350*/</span></div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;<span class="comment">//     { 4096,   6272,   6144,  12544,  12288,  25088,  24576}  /* E_PIXCLK_148500*/</span></div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;<span class="comment">//  #ifdef FORMAT_PC</span></div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;<span class="comment">//    ,{ 4096,  6272,  6144,  12544,  12288,  25088,  24576}, /* E_PIXCLK_31500 */</span></div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;<span class="comment">//     { 4096,  6272,  6144,  12544,  12288,  25088,  24576}, /* E_PIXCLK_36000 */</span></div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;<span class="comment">//     { 4096,  6272,  6144,  12544,  12288,  25088,  24576}, /* E_PIXCLK_40000 */</span></div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;<span class="comment">//     { 4096,  6272,  6144,  12544,  12288,  25088,  24576}, /* E_PIXCLK_49500 */</span></div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;<span class="comment">//     { 4096,  6272,  6144,  12544,  12288,  25088,  24576}, /* E_PIXCLK_50000 */</span></div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;<span class="comment">//     { 4096,  6272,  6144,  12544,  12288,  25088,  24576}, /* E_PIXCLK_56250 */</span></div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;<span class="comment">//     { 4096,  6272,  6144,  12544,  12288,  25088,  24576}, /* E_PIXCLK_65000 */</span></div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;<span class="comment">//     { 4096,  6272,  6144,  12544,  12288,  25088,  24576}, /* E_PIXCLK_75000 */</span></div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;<span class="comment">//     { 4096,  6272,  6144,  12544,  12288,  25088,  24576}, /* E_PIXCLK_78750 */</span></div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;<span class="comment">//     { 4096,  6272,  6144,  12544,  12288,  25088,  24576},  /* E_PIXCLK_162000*/</span></div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="comment">//     { 4096,  6272,  6144,  12544,  12288,  25088,  24576}  /* E_PIXCLK_157500*/</span></div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;<span class="comment">//  #endif /* FORMAT_PC */</span></div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;<span class="comment">//  };</span></div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    acrN = 6272;</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    <span class="comment">/* Set ACR N multiplier [19 to 16] */</span></div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    reg_val = (uint8_t) (acrN &gt;&gt; 16);</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a> (dev, ACR_N_2, reg_val);</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    <span class="comment">/* Set ACR N multiplier [15 to 8] */</span></div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;    reg_val = (uint8_t) (acrN &gt;&gt; 8);</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a> (dev, ACR_N_1, reg_val);</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    <span class="comment">/* Set ACR N multiplier [7 to 0] */</span></div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    reg_val = (uint8_t) acrN;</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a> (dev, ACR_N_0, reg_val);</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;<span class="comment">     * Set the CDC Audio Divider register based on the audio sample frequency</span></div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;<span class="comment">     * afs and current pixel clock.</span></div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;<span class="comment">//  reg_val = kPixClkToAdiv[pixClk][afs];</span></div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;<span class="comment">//  {</span></div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;<span class="comment">//   /* HDMITX_AFS_32k  _AFS_48K       _AFS_96K        _AFS_192K */</span></div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;<span class="comment">//   /*         _AFS_44_1k      _AFS_88_2K      _AFS_176_4K       */</span></div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;<span class="comment">//     {2,      2,      2,      1,      1,      0,      0},     /* E_PIXCLK_25175 */</span></div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;<span class="comment">//     {2,      2,      2,      1,      1,      0,      0},     /* E_PIXCLK_25200 */</span></div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;<span class="comment">//     {2,      2,      2,      1,      1,      0,      0},     /* E_PIXCLK_27000 */</span></div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;<span class="comment">//     {2,      2,      2,      1,      1,      0,      0},     /* E_PIXCLK_27027 */</span></div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;<span class="comment">//     {3,      3,      3,      2,      2,      1,      1},     /* E_PIXCLK_54000 */</span></div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;<span class="comment">//     {3,      3,      3,      2,      2,      1,      1},     /* E_PIXCLK_54054 */</span></div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;<span class="comment">//     {3,      3,      3,      2,      2,      1,      1},     /* E_PIXCLK_59400 */</span></div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;<span class="comment">//     {4,      3,      3,      2,      2,      1,      1},     /* E_PIXCLK_74175 */</span></div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;<span class="comment">//     {4,      3,      3,      2,      2,      1,      1},     /* E_PIXCLK_74250 */</span></div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;<span class="comment">//     {5,      4,      4,      3,      3,      2,      2},     /* E_PIXCLK_148350 */</span></div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;<span class="comment">//     {5,      4,      4,      3,      3,      2,      2}      /* E_PIXCLK_148500 */</span></div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;<span class="comment">//  #ifdef FORMAT_PC</span></div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;<span class="comment">//    ,{2,      2,      2,      1,      1,      0,      0}, /* E_PIXCLK_31500  */</span></div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;<span class="comment">//     {3,      2,      2,      1,      1,      0,      0}, /* E_PIXCLK_36000  */</span></div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;<span class="comment">//     {3,      2,      2,      1,      1,      0,      0}, /* E_PIXCLK_40000  */</span></div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;<span class="comment">//     {3,      3,      3,      2,      2,      1,      1}, /* E_PIXCLK_49500  */</span></div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;<span class="comment">//     {3,      3,      3,      2,      2,      1,      1}, /* E_PIXCLK_50000  */</span></div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;<span class="comment">//     {3,      3,      3,      2,      2,      1,      1}, /* E_PIXCLK_56250  */</span></div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;<span class="comment">//     {4,      3,      3,      2,      2,      1,      1}, /* E_PIXCLK_65000  */</span></div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;<span class="comment">//     {4,      3,      3,      2,      2,      1,      1}, /* E_PIXCLK_75000  */</span></div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;<span class="comment">//     {4,      3,      3,      2,      2,      1,      1}, /* E_PIXCLK_78750  */</span></div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;<span class="comment">//     {5,      4,      4,      3,      3,      2,      2}, /* E_PIXCLK_162000 */</span></div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;<span class="comment">//     {5,      4,      4,      3,      3,      2,      2}  /* E_PIXCLK_157500 */</span></div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;<span class="comment">//  #endif /* FORMAT_PC */</span></div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;<span class="comment">//  };</span></div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a>(dev, AUDIO_DIV, 4);</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;<span class="comment">     * If auto CTS, get CTS value based on the audio sample</span></div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;<span class="comment">     * frequency afs and current pixel clock.</span></div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;<span class="comment">//  if (cts == 0)</span></div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;<span class="comment">//      cts = kPixClkToAcrCts[pixClk][afs];</span></div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160; </div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    <span class="comment">/* Set manual or pixel clock CTS */</span></div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    <span class="keywordflow">if</span> (cts != 0) {</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;        <span class="comment">/* Set manual ACR CTS [19 to 16] */</span></div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;        reg_val = (uint8_t) (cts &gt;&gt; 16);</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;        ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a> (dev, ACR_CTS_2, reg_val);</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;        <span class="comment">/* Set manual ACR CTS [15 to 8] */</span></div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;        reg_val = (uint8_t) (cts &gt;&gt; 8);</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;        ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a> (dev, ACR_CTS_1, reg_val);</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160; </div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;        <span class="comment">/* Set manual ACR CTS [7 to 0] */</span></div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;        reg_val = (uint8_t) cts;</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;        ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a> (dev, ACR_CTS_0, reg_val);</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;    }</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    <span class="comment">/* Set the CTS clock reference register according to cts_ref */</span></div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    reg_val = (uint8_t) cts_ref;</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev,</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;            AIP_CLKSEL,</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;            AIP_CLKSEL_SEL_FS_MASK,</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;            reg_val);</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;<span class="comment">//  ret = write_reg_mask_table(dev, &amp;kResetCtsGenerator[0]);</span></div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;  </div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;}</div><div class="ttc" id="group___t_d_a998_x_html_gga2473e43e8d9011dd526b160da99ecb66a4d52c31a7aa7272d9df8655bb0aec2b9"><div class="ttname"><a href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66a4d52c31a7aa7272d9df8655bb0aec2b9">VFMT_61_1280x720p_25Hz</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:113</div></div>
<div class="ttc" id="group___t_d_a998_x_html_gga2473e43e8d9011dd526b160da99ecb66afb842a2ba3d8fd7e9208d58d2d8e51a2"><div class="ttname"><a href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66afb842a2ba3d8fd7e9208d58d2d8e51a2">VFMT_62_1280x720p_30Hz</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:114</div></div>
<div class="ttc" id="group___t_d_a998_x_html_gga2473e43e8d9011dd526b160da99ecb66aa0381c9789a258d4ea53605874028234"><div class="ttname"><a href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66aa0381c9789a258d4ea53605874028234">VFMT_01_640x480p_60Hz</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:74</div></div>
<div class="ttc" id="group___t_d_a998_x___h_d_m_i___core___registers_html_ggaa560e03199cac459922972f053356e09a977673dc75efc9cf0147e11306375985"><div class="ttname"><a href="group___t_d_a998_x___h_d_m_i___core___registers.html#ggaa560e03199cac459922972f053356e09a977673dc75efc9cf0147e11306375985">VFREQ_50Hz</a></div><div class="ttdef"><b>Definition:</b> tda998x.c:926</div></div>
<div class="ttc" id="group___t_d_a998_x___h_d_m_i___core___registers_html_ggaa560e03199cac459922972f053356e09a41847fb2fc5a3c9430e25e8a225eb062"><div class="ttname"><a href="group___t_d_a998_x___h_d_m_i___core___registers.html#ggaa560e03199cac459922972f053356e09a41847fb2fc5a3c9430e25e8a225eb062">VFREQ_30Hz</a></div><div class="ttdef"><b>Definition:</b> tda998x.c:925</div></div>
<div class="ttc" id="group___t_d_a998_x_html_gga2473e43e8d9011dd526b160da99ecb66abe3dec727201bbf555dde9fe3430f1bc"><div class="ttname"><a href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66abe3dec727201bbf555dde9fe3430f1bc">VFMT_34_1920x1080p_30Hz</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:107</div></div>
<div class="ttc" id="group___t_d_a998_x___functions___i2_c_html_ga5ff7c50b095acc187cdf4078ebb8d884"><div class="ttname"><a href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a></div><div class="ttdeci">static int write_reg(struct tda998x_dev *dev, enum tda998x_hdmi_reg reg, uint8_t data)</div><div class="ttdoc">Write Register. </div><div class="ttdef"><b>Definition:</b> tda998x.c:1283</div></div>
<div class="ttc" id="group___t_d_a998_x___h_d_m_i___core___registers_html_ggaa560e03199cac459922972f053356e09a5cf2537b41e157dc5359f48d3779e68e"><div class="ttname"><a href="group___t_d_a998_x___h_d_m_i___core___registers.html#ggaa560e03199cac459922972f053356e09a5cf2537b41e157dc5359f48d3779e68e">VFREQ_25Hz</a></div><div class="ttdef"><b>Definition:</b> tda998x.c:924</div></div>
<div class="ttc" id="group___t_d_a998_x___h_d_m_i___core___registers_html_ggaa560e03199cac459922972f053356e09acdeee1db9118b513656e10425a0c8736"><div class="ttname"><a href="group___t_d_a998_x___h_d_m_i___core___registers.html#ggaa560e03199cac459922972f053356e09acdeee1db9118b513656e10425a0c8736">VFREQ_24Hz</a></div><div class="ttdef"><b>Definition:</b> tda998x.c:923</div></div>
<div class="ttc" id="group___t_d_a998_x_html_gga2473e43e8d9011dd526b160da99ecb66a8bd2c8154766a6f635a08aa0b921aeda"><div class="ttname"><a href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66a8bd2c8154766a6f635a08aa0b921aeda">VFMT_60_1280x720p_24Hz</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:112</div></div>
<div class="ttc" id="group___t_d_a998_x___functions___i2_c_html_ga0e3c7717dc1e066aadf0cdd6802690d4"><div class="ttname"><a href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a></div><div class="ttdeci">static int write_reg_mask(struct tda998x_dev *dev, enum tda998x_hdmi_reg reg, uint8_t mask, uint8_t val)</div><div class="ttdoc">Register Mask Write Write a value with mask bits to a register. </div><div class="ttdef"><b>Definition:</b> tda998x.c:1371</div></div>
<div class="ttc" id="group___t_d_a998_x_html_ggad08fa447c674bbe3aeb29cbdaca69acaa789dd80264a30ba9c638b03dd776e7ef"><div class="ttname"><a href="group___t_d_a998_x.html#ggad08fa447c674bbe3aeb29cbdaca69acaa789dd80264a30ba9c638b03dd776e7ef">SINK_HDMI</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:65</div></div>
<div class="ttc" id="group___t_d_a998_x_html_gga2473e43e8d9011dd526b160da99ecb66a11c0973417f5b5e66b053c8705f14d28"><div class="ttname"><a href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66a11c0973417f5b5e66b053c8705f14d28">VFMT_05_1920x1080i_60Hz</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:78</div></div>
<div class="ttc" id="group___t_d_a998_x_html_gga2473e43e8d9011dd526b160da99ecb66a42fba4f03d67aafa7178b5a78b5bfa12"><div class="ttname"><a href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66a42fba4f03d67aafa7178b5a78b5bfa12">VFMT_20_1920x1080i_50Hz</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:93</div></div>
<div class="ttc" id="group___t_d_a998_x___audio_html_gga62cfae6cc726327b6c55cfb08dfd09b5a887a43cd05838ce3f06b75cf2f182936"><div class="ttname"><a href="group___t_d_a998_x___audio.html#gga62cfae6cc726327b6c55cfb08dfd09b5a887a43cd05838ce3f06b75cf2f182936">CTSK_USE_CTSX</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:358</div></div>
<div class="ttc" id="group___t_d_a998_x_html_gga2473e43e8d9011dd526b160da99ecb66ad89773028ec4dd84662ad8522571ad7a"><div class="ttname"><a href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66ad89773028ec4dd84662ad8522571ad7a">VFMT_32_1920x1080p_24Hz</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:105</div></div>
<div class="ttc" id="group___t_d_a998_x_html_gga2473e43e8d9011dd526b160da99ecb66a8ebfb58544baceed7bed10d683f0cd0e"><div class="ttname"><a href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66a8ebfb58544baceed7bed10d683f0cd0e">VFMT_33_1920x1080p_25Hz</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:106</div></div>
<div class="ttc" id="group___t_d_a998_x_html_gga2473e43e8d9011dd526b160da99ecb66af1419762802acdd3a85c2f969158922b"><div class="ttname"><a href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66af1419762802acdd3a85c2f969158922b">VFMT_17_720x576p_50Hz</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:90</div></div>
<div class="ttc" id="group___t_d_a998_x_html_gga2473e43e8d9011dd526b160da99ecb66af8c472bf89cc0b7435c4d5c58c86b8fe"><div class="ttname"><a href="group___t_d_a998_x.html#gga2473e43e8d9011dd526b160da99ecb66af8c472bf89cc0b7435c4d5c58c86b8fe">VFMT_31_1920x1080p_50Hz</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:104</div></div>
<div class="ttc" id="group___t_d_a998_x___audio_html_ggaf00bdabd67c86a01f9c47bc03584f0a9a01be2de745e63a00d0d33b54ae9e72f4"><div class="ttname"><a href="group___t_d_a998_x___audio.html#ggaf00bdabd67c86a01f9c47bc03584f0a9a01be2de745e63a00d0d33b54ae9e72f4">CTSMTS_USE_CTSX</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:367</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga3779a1bc1504e16c37ee0f7a258e2b2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3779a1bc1504e16c37ee0f7a258e2b2b">&#9670;&nbsp;</a></span>tda998x_aud_set_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tda998x_aud_set_input </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtda998x__dev.html">tda998x_dev</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtda998x__audin__cfg.html">tda998x_audin_cfg</a> *&#160;</td>
          <td class="paramname"><em>audin_cfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="tda998x_8c.html">projects/lib/tda998x.c</a>&gt;</code></p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000009">Todo:</a></b></dt><dd>Rework the audio configuration </dd></dl>
<p>&lt; Number of channels - 1 <br />
 &lt; Channel allocation code </p>
<div class="fragment"><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;{</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;    <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    uint8_t reg_val;</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    uint8_t buf[4];</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;    uint8_t layout;                    <span class="comment">/* 0 or 1 */</span></div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    uint16_t uCtsX;                    <span class="comment">/* CtsX value */</span></div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;    uint32_t acrN;</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtda998x__aud__if__pkt.html">tda998x_aud_if_pkt</a> aif_pkt;        <span class="comment">/* Audio infoframe packet */</span></div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;    </div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a>(dev, ENA_AP, 0xFF);</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;    </div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a>(dev, ENA_ACLK, 0x01);</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;    </div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;    <span class="comment">/* configure MUX_AP */</span></div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a>(dev, MUX_AP, 0x64);</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    </div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;    <span class="comment">/* Set the audio input processor format to aFmt. */</span></div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev, AIP_CLKSEL, 0x38, 0x08);</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;    </div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    <span class="comment">/* Channel status on 1 channel  */</span></div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev, CA_I2S, (1 &lt;&lt; 5), 0);</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    </div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev, CA_I2S, 0x1F, 0x1F);</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;    </div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;    <span class="comment">/* Select the I2S format */</span></div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev, I2S_FORMAT, 0x0F, 0x0E);</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    </div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev, AIP_CNTRL_0, (1 &lt;&lt; 2), (1 &lt;&lt; 2));</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;    </div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a>(dev, LATENCY_RD, 0x80);</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    </div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;    <span class="comment">/* Auto */</span></div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev, AIP_CNTRL_0, (1 &lt;&lt; 5), 0);</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;    </div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;    <span class="comment">/* Set the Post-divider measured timestamp factor */</span></div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev, CTS_N_RW, 0x30, 0x10);</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;    </div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    <span class="comment">/* Set the Pre-divider scale */</span></div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev, CTS_N_RW, 0x07, 0x01);</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;    </div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;    <span class="comment">/* Set ACR N multiplier [19 to 16] */</span></div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a>(dev, ACR_N_2, 0x00);</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    </div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    <span class="comment">/* Set ACR N multiplier [15 to 8] */</span></div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a>(dev, ACR_N_1, 0x18);</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    </div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a>(dev, ACR_N_0, 0x00);</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    </div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;<span class="comment">     * Set the CDC Audio Divider register based on the audio sample</span></div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;<span class="comment">     * frequency afs and current pixel clock</span></div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a>(dev, AUDIO_DIV, 0x04);</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;    </div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    <span class="comment">/* Set the CTS clock reference register according to ctsRef */</span></div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev, AIP_CLKSEL, 0x03, 0);</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    </div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    <span class="comment">/* Reset and release the CTS generator */</span></div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev, AIP_CNTRL_0, (1 &lt;&lt; 6), (1 &lt;&lt; 6));</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;    </div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev, AIP_CNTRL_0, (1 &lt;&lt; 6), 0);</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;    </div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;    <span class="comment">/* Prepare Byte 0 */</span></div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;    buf[0] = 0x00; <span class="comment">// ((UInt8)formatInfo &lt;&lt; 3) | ((UInt8)copyright &lt;&lt; 2) | ((UInt8)pcmIdentification&lt;&lt; 1);</span></div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;    </div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;    <span class="comment">/* Prepare Byte 1 */</span></div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;    buf[1] = 0x00; <span class="comment">// categoryCode;</span></div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;    </div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;    <span class="comment">/* Prepare Byte 3  - note Byte 2 not in sequence in TDA9983 register map */</span></div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;    buf[2] = 0x02; <span class="comment">// ((UInt8)clockAccuracy &lt;&lt; 4) | 0x02;</span></div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;    </div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;    <span class="comment">/* Prepare Byte 4 */</span></div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;    buf[3] = (13 &lt;&lt; 4) | (1 &lt;&lt; 1);</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;    </div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#gab8ef57443b7f888b186f8204f0b38f48">tda998x_write</a>(dev, CH_STAT_B_0, 4, &amp;buf[0]);</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;    </div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___audio.html#ga52e65d828f685a49c2113f236786ff1c">tda998x_aud_set_mute</a>(dev, <span class="keyword">true</span>);</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;    </div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;    <span class="comment">/* Wait 20ms */</span></div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;    usleep(1000 * 20);</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;    </div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___audio.html#ga52e65d828f685a49c2113f236786ff1c">tda998x_aud_set_mute</a>(dev, <span class="keyword">false</span>);</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;    </div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    aif_pkt.nchan = 7;            </div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;    aif_pkt.type = 0;            <span class="comment">/* refer to stream header */</span></div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;    aif_pkt.samp_size = 0;            <span class="comment">/* refer to stream header */</span></div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;    aif_pkt.chan_alloc = audin_cfg-&gt;<a class="code" href="structtda998x__audin__cfg.html#adbcefc619a3243f8695b425df54ba05c">ch_alloc</a>;    </div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;    aif_pkt.lvl_shift = 0;            <span class="comment">/* 0dB level shift */</span></div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;    aif_pkt.dmix_inhib = 0;        <span class="comment">/* down-mix stereo permitted */</span></div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;    aif_pkt.samp_freq = 0;            <span class="comment">/* refer to stream header */</span></div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    </div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___video_out.html#gaa88dbc34aba36829f9fd1f64dd31ee85">tda998x_aud_set_pkt_infoframe</a>(dev, &amp;aif_pkt, <span class="keyword">true</span>);</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;    </div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;}</div><div class="ttc" id="group___t_d_a998_x___video_out_html_gaa88dbc34aba36829f9fd1f64dd31ee85"><div class="ttname"><a href="group___t_d_a998_x___video_out.html#gaa88dbc34aba36829f9fd1f64dd31ee85">tda998x_aud_set_pkt_infoframe</a></div><div class="ttdeci">static int tda998x_aud_set_pkt_infoframe(struct tda998x_dev *dev, struct tda998x_aud_if_pkt *pkt, bool en)</div><div class="ttdoc">Set Audio Infoframe Packet. </div><div class="ttdef"><b>Definition:</b> tda998x.c:3984</div></div>
<div class="ttc" id="group___t_d_a998_x___functions___i2_c_html_ga5ff7c50b095acc187cdf4078ebb8d884"><div class="ttname"><a href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a></div><div class="ttdeci">static int write_reg(struct tda998x_dev *dev, enum tda998x_hdmi_reg reg, uint8_t data)</div><div class="ttdoc">Write Register. </div><div class="ttdef"><b>Definition:</b> tda998x.c:1283</div></div>
<div class="ttc" id="group___t_d_a998_x___functions___i2_c_html_gab8ef57443b7f888b186f8204f0b38f48"><div class="ttname"><a href="group___t_d_a998_x___functions___i2_c.html#gab8ef57443b7f888b186f8204f0b38f48">tda998x_write</a></div><div class="ttdeci">static int tda998x_write(struct tda998x_dev *dev, enum tda998x_hdmi_reg reg, uint8_t len, uint8_t *data)</div><div class="ttdoc">Write Data. </div><div class="ttdef"><b>Definition:</b> tda998x.c:1247</div></div>
<div class="ttc" id="group___t_d_a998_x___functions___i2_c_html_ga0e3c7717dc1e066aadf0cdd6802690d4"><div class="ttname"><a href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a></div><div class="ttdeci">static int write_reg_mask(struct tda998x_dev *dev, enum tda998x_hdmi_reg reg, uint8_t mask, uint8_t val)</div><div class="ttdoc">Register Mask Write Write a value with mask bits to a register. </div><div class="ttdef"><b>Definition:</b> tda998x.c:1371</div></div>
<div class="ttc" id="structtda998x__aud__if__pkt_html"><div class="ttname"><a href="structtda998x__aud__if__pkt.html">tda998x_aud_if_pkt</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:436</div></div>
<div class="ttc" id="structtda998x__audin__cfg_html_adbcefc619a3243f8695b425df54ba05c"><div class="ttname"><a href="structtda998x__audin__cfg.html#adbcefc619a3243f8695b425df54ba05c">tda998x_audin_cfg::ch_alloc</a></div><div class="ttdeci">uint8_t ch_alloc</div><div class="ttdef"><b>Definition:</b> tda998x.h:452</div></div>
<div class="ttc" id="group___t_d_a998_x___functions___audio_html_ga52e65d828f685a49c2113f236786ff1c"><div class="ttname"><a href="group___t_d_a998_x___functions___audio.html#ga52e65d828f685a49c2113f236786ff1c">tda998x_aud_set_mute</a></div><div class="ttdeci">static int tda998x_aud_set_mute(struct tda998x_dev *dev, bool mute)</div><div class="ttdoc">Set Audio Mute. </div><div class="ttdef"><b>Definition:</b> tda998x.c:2431</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga52e65d828f685a49c2113f236786ff1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga52e65d828f685a49c2113f236786ff1c">&#9670;&nbsp;</a></span>tda998x_aud_set_mute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tda998x_aud_set_mute </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtda998x__dev.html">tda998x_dev</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>mute</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="tda998x_8c.html">projects/lib/tda998x.c</a>&gt;</code></p>

<p>Set Audio Mute. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>TDA998x device structure pointer </td></tr>
    <tr><td class="paramname">mute</td><td>Mute enable value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero error status otherwise </dd></dl>
<div class="fragment"><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;{</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;    <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;    <span class="keywordflow">if</span> (dev-&gt;sink != <a class="code" href="group___t_d_a998_x.html#ggad08fa447c674bbe3aeb29cbdaca69acaa789dd80264a30ba9c638b03dd776e7ef">SINK_HDMI</a>)</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;        <span class="keywordflow">return</span> ERR_NOT_PERMITTED;</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160; </div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;    <span class="keywordflow">if</span> (mute) {</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;        ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev,</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;                SR_REG,</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;                SR_REG_SR_AUDIO,</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;                SR_REG_SR_AUDIO);</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;        ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev, SR_REG, SR_REG_SR_AUDIO, 0);</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;            <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;    }</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160; </div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a>(dev,</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;            AIP_CNTRL_0,</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;            AIP_CNTRL_0_RST_FIFO,</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;            mute ? AIP_CNTRL_0_RST_FIFO : 0);</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160; </div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;}</div><div class="ttc" id="group___t_d_a998_x___functions___i2_c_html_ga0e3c7717dc1e066aadf0cdd6802690d4"><div class="ttname"><a href="group___t_d_a998_x___functions___i2_c.html#ga0e3c7717dc1e066aadf0cdd6802690d4">write_reg_mask</a></div><div class="ttdeci">static int write_reg_mask(struct tda998x_dev *dev, enum tda998x_hdmi_reg reg, uint8_t mask, uint8_t val)</div><div class="ttdoc">Register Mask Write Write a value with mask bits to a register. </div><div class="ttdef"><b>Definition:</b> tda998x.c:1371</div></div>
<div class="ttc" id="group___t_d_a998_x_html_ggad08fa447c674bbe3aeb29cbdaca69acaa789dd80264a30ba9c638b03dd776e7ef"><div class="ttname"><a href="group___t_d_a998_x.html#ggad08fa447c674bbe3aeb29cbdaca69acaa789dd80264a30ba9c638b03dd776e7ef">SINK_HDMI</a></div><div class="ttdef"><b>Definition:</b> tda998x.h:65</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga22f779decacbc3a28c2ae7c8f0ea62df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga22f779decacbc3a28c2ae7c8f0ea62df">&#9670;&nbsp;</a></span>tda998x_aud_set_port_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tda998x_aud_set_port_enable </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtda998x__dev.html">tda998x_dev</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>en</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="tda998x_8c.html">projects/lib/tda998x.c</a>&gt;</code></p>

<p>Set Audio Port Enable. </p>
<p>Lookup table for each pixel clock frequency's CTS value in kHz according to SCS table "Audio Clock Recovery CTS Values" Lookup table for each pixel clock frequency's Audio Clock Regeneration N, according to SCS Table "Audio Clock Recovery N Values" Lookup table for each pixel clock frequency's Audio Divider, according to SCS Table "Audio Clock Recovery Divider Values" Lookup table for converting a sampling frequency into the values required in channel status byte 3 according to IEC60958-3 Lookup table for each CTS X factor's k and m register values Table of registers to reset and release the CTS generator </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>TDA998x device structure pointer </td></tr>
    <tr><td class="paramname">en</td><td>Audio port enable register value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero error status otherwise </dd></dl>
<div class="fragment"><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;{</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    <span class="comment">/* Check parameter */</span></div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    <span class="keywordflow">if</span> (dev == NULL)</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;        <span class="keywordflow">return</span> ERR_NULL_PARAM;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    ret = <a class="code" href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a>(dev, ENA_AP, en);</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;}</div><div class="ttc" id="group___t_d_a998_x___functions___i2_c_html_ga5ff7c50b095acc187cdf4078ebb8d884"><div class="ttname"><a href="group___t_d_a998_x___functions___i2_c.html#ga5ff7c50b095acc187cdf4078ebb8d884">write_reg</a></div><div class="ttdeci">static int write_reg(struct tda998x_dev *dev, enum tda998x_hdmi_reg reg, uint8_t data)</div><div class="ttdoc">Write Register. </div><div class="ttdef"><b>Definition:</b> tda998x.c:1283</div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Sep 14 2018 13:30:57 for piSmasher Configuration Libraries by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
